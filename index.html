<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dante Propiedades — Chatbot</title>
<style>
  body { font-family: Inter, Arial, sans-serif; max-width: 900px; margin: 40px auto; padding: 0 16px; }
  .chat-box { border: 1px solid #ddd; height: 60vh; overflow-y: auto; padding: 12px; border-radius: 8px; }
  .input-row { display:flex; gap:8px; margin-top:12px; }
  input[type="text"]{ flex:1; padding:10px; font-size:16px }
  button{ padding:10px 14px }
  .msg-user{ text-align:right }
  .msg-bot{ text-align:left }
</style>
</head>
<body>
<h1>Dante Propiedades — Chat</h1>
<p>Preguntá por propiedades o pedí asesoramiento inmobiliario.</p>
<div class="chat-box" id="chatBox"></div>
<div class="input-row">
  <input id="userInput" type="text" placeholder="Escribí tu consulta, p. ej. 'Buscar depto 2 amb en Palermo hasta $200000'">
  <button id="sendBtn">Enviar</button>
</div>
<script>
const API_URL = "https://chatgpt-eio1.onrender.com/chat";



// <--- reemplazar por tu URL del backend

const chatBox = document.getElementById('chatBox');
const input = document.getElementById('userInput');
const button = document.getElementById('sendBtn');

function addMessage(text, from="bot"){
  const p = document.createElement('p');
  p.innerHTML = from === 'user' ? `<b>Vos:</b> ${text}` : `<b>Bot:</b> ${text}`;
  p.className = from === 'user' ? 'msg-user' : 'msg-bot';
  chatBox.appendChild(p);
  chatBox.scrollTop = chatBox.scrollHeight;
}

async function send(){
  const msg = input.value.trim();
  if(!msg) return;
  addMessage(msg, 'user');
  input.value = '';

  try{
    const res = await fetch(API_URL, {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({message: msg})
    });
    if(!res.ok){
      addMessage('Hubo un error en el servidor.');
      return;
    }
    const data = await res.json();
    addMessage(data.response || 'Sin respuesta');
  }catch(e){
    addMessage('No se pudo conectar al backend: ' + e.message);
  }
}

button.addEventListener('click', send);
input.addEventListener('keypress', (e)=>{ if(e.key==='Enter') send(); });
</script>
</body>
</html>